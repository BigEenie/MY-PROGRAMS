<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - {{ settings.university_name }} {{ settings.portal_title }}</title>
    <meta name="description" content="Admin panel for managing {{ settings.university_name }} Course Materials Portal">
    
 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
   
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="{{ url_for('static', filename='images/ui-logo.svg') }}" alt="UI Logo" class="nav-logo">
                <div class="nav-text">
                    <h1>Admin Panel</h1>
                    <span>Course Materials Management</span>
                </div>
            </div>
            <div class="nav-links">
                <a href="{{ url_for('index') }}" class="nav-link">View Portal</a>
                <a href="#settings" class="nav-link">Settings</a>
                <a href="{{ url_for('about') }}" class="nav-link">About</a>
                <a href="{{ url_for('admin_logout') }}" class="nav-link logout-link">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
            <div class="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>


    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        <i class="fas fa-info-circle"></i>
                        {{ message }}
                        <button class="alert-close" onclick="this.parentElement.remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    
    <section class="admin-section">
        <div class="container">
            <div class="admin-header">
                <h1 class="admin-title">
                    <i class="fas fa-cogs"></i>
                    Portal Management Dashboard
                </h1>
                <p class="admin-description">
                    Manage faculties, departments, levels, and customize your {{ settings.university_name }} Course Materials Portal
                </p>
            </div>

            <!-- Quick Actions 
            <div class="quick-actions">
                <button class="action-btn primary" onclick="showSection('settings')">
                    <i class="fas fa-university"></i>
                    University Settings
                </button>
                <button class="action-btn secondary" onclick="showSection('faculties')">
                    <i class="fas fa-graduation-cap"></i>
                    Manage Faculties
                </button>
                <button class="action-btn success" onclick="exportData()">
                    <i class="fas fa-download"></i>
                    Export Data
                </button>
                <button class="action-btn warning" onclick="importData()">
                    <i class="fas fa-upload"></i>
                    Import Data
                </button>
            </div>

            <!-- University Settings Section 
            <div id="settings-section" class="admin-section-content active">
                <div class="section-header">
                    <h2><i class="fas fa-university"></i> University Settings</h2>
                    <p>Customize your university information and branding</p>
                </div>

                <form method="POST" action="{{ url_for('admin_settings') }}" class="settings-form">
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3><i class="fas fa-info-circle"></i> Basic Information</h3>
                            <div class="form-group">
                                <label for="university-name">University Name</label>
                                <input type="text" id="university-name" name="university_name" value="{{ settings.university_name }}" placeholder="Enter university name" required>
                            </div>
                            <div class="form-group">
                                <label for="university-motto">University Motto</label>
                                <input type="text" id="university-motto" name="university_motto" value="{{ settings.university_motto }}" placeholder="Enter university motto" required>
                            </div>
                            <div class="form-group">
                                <label for="portal-title">Portal Title</label>
                                <input type="text" id="portal-title" name="portal_title" value="{{ settings.portal_title }}" placeholder="Enter portal title" required>
                            </div>
                        </div>

                        <div class="settings-card">
                            <h3><i class="fas fa-palette"></i> Colors & Branding</h3>
                            <div class="form-group">
                                <label for="primary-color">Primary Color</label>
                                <div class="color-input-group">
                                    <input type="color" id="primary-color" name="primary_color" value="{{ settings.primary_color }}">
                                    <input type="text" id="primary-color-text" value="{{ settings.primary_color }}" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="secondary-color">Secondary Color</label>
                                <div class="color-input-group">
                                    <input type="color" id="secondary-color" name="secondary_color" value="{{ settings.secondary_color }}">
                                    <input type="text" id="secondary-color-text" value="{{ settings.secondary_color }}" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="settings-card">
                            <h3><i class="fas fa-envelope"></i> Contact Information</h3>
                            <div class="form-group">
                                <label for="university-address">Address</label>
                                <textarea id="university-address" name="university_address" rows="3" placeholder="Enter university address" required>{{ settings.university_address }}</textarea>
                            </div>
                            <div class="form-group">
                                <label for="university-phone">Phone</label>
                                <input type="tel" id="university-phone" name="university_phone" value="{{ settings.university_phone }}" placeholder="Enter phone number" required>
                            </div>
                            <div class="form-group">
                                <label for="university-email">Email</label>
                                <input type="email" id="university-email" name="university_email" value="{{ settings.university_email }}" placeholder="Enter email address" required>
                            </div>
                        </div>
                    </div>

                    <div class="section-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save Settings
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetSettings()">
                            <i class="fas fa-undo"></i>
                            Reset to Default
                        </button>
                    </div>
                </form>
            </div>

            <!-- Faculties Management Section 
            <div id="faculties-section" class="admin-section-content">
                <div class="section-header">
                    <h2><i class="fas fa-graduation-cap"></i> Faculties Management</h2>
                    <p>Add, edit, and organize your university faculties and departments</p>
                </div>

                <div class="management-toolbar">
                    <button class="btn btn-success" onclick="addFaculty()">
                        <i class="fas fa-plus"></i>
                        Add New Faculty
                    </button>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="faculty-search" placeholder="Search faculties...">
                    </div>
                </div>

                <div class="faculties-list" id="faculties-list">
                    {% for faculty in materials.faculties %}
                    <div class="faculty-item" data-faculty-id="{{ faculty.id }}">
                        <div class="faculty-header">
                            <div class="faculty-info">
                                <i class="{{ faculty.icon }}"></i>
                                <div>
                                    <h4>{{ faculty.name }}</h4>
                                    <p>{{ faculty.description }}</p>
                                </div>
                            </div>
                            <div class="faculty-actions">
                                <button class="btn-icon" onclick="editFaculty('{{ faculty.id }}')" title="Edit Faculty">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon delete" onclick="deleteFaculty('{{ faculty.id }}')" title="Delete Faculty">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="departments-list">
                            {% for department in faculty.departments %}
                            <div class="department-item">
                                <div class="department-info">
                                    <h5>{{ department.name }}</h5>
                                    <p>{{ department.description }}</p>
                                    <span class="level-count">{{ department.levels|length }} levels</span>
                                </div>
                                <div class="department-actions">
                                    <button class="btn-icon" onclick="editDepartment('{{ faculty.id }}', '{{ department.id }}')" title="Edit Department">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete" onclick="deleteDepartment('{{ faculty.id }}', '{{ department.id }}')" title="Delete Department">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                            <button class="btn btn-outline" onclick="addDepartment('{{ faculty.id }}')">
                                <i class="fas fa-plus"></i>
                                Add Department
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- Faculty Modal 
    <div id="faculty-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="faculty-modal-title">Add New Faculty</h3>
                <button class="modal-close" onclick="closeFacultyModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="faculty-form">
                    <input type="hidden" id="faculty-id">
                    <div class="form-group">
                        <label for="faculty-name">Faculty Name *</label>
                        <input type="text" id="faculty-name" required placeholder="e.g., Faculty of Science">
                    </div>
                    <div class="form-group">
                        <label for="faculty-description">Description *</label>
                        <textarea id="faculty-description" required rows="3" placeholder="Describe the faculty and its focus areas"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="faculty-icon">Icon (Font Awesome class) *</label>
                        <input type="text" id="faculty-icon" required placeholder="e.g., fas fa-microscope">
                        <small>Visit <a href="https://fontawesome.com/icons" target="_blank">FontAwesome</a> for icon classes</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeFacultyModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveFaculty()">Save Faculty</button>
            </div>
        </div>
    </div>

    <!-- Scripts 
    <script src="{{ url_for('static', filename='js/config.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
    
    <script>
        // Pass materials data to JavaScript
        window.materialsData = {{ materials|tojson|safe }};
    </script>
</body>
</html>-->
